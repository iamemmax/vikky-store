<div class="mostPouplar_container">
    <h2>Most Popular</h2>
    <span></span>

 
        
    <div class="categories">

        <div class="cart active" data-name="all">All</div> 
        <div class="cart" data-name="shoe">Shoe</div> 
        <div class="cart" data-name="wares">Wares</div> 
        <div class="cart" data-name="computer">computer</div> 
        <div class="cart" data-name="phone">Phones</div> 
        <div class="cart" data-name="electronic">electronic</div> 
    
</div>
    

    <div class="popular">

        <% products.forEach(product => { %>
            
            <div class="pro_img mycategory" data-name="<%= product.categories %>">
                
                <a href="/product/<%= product.slug %> ">
                    <img src="./img/upload/<%= product.myfiles[0].filename %> " alt="" class="product-img">
                    
                    <h2 class="product-name"><%= product.productName.substr(0,15) %> </h2>
                </a>
                
                <div class="rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p id="amount" class="product-price">&#8358 <%= product.amount %> </p>
          
             
        
                        <input type="hidden"    value="<%= product.id %> " class="product-id">
                        <input type="hidden"  name="price"  value="<%= product.amount %> ">
                        <input type="hidden" name="quantity" value="1" id="" class="product-quantity">
                        <input type="hidden" name="sizes" value="<%= product.sizes %>" id="" class="product-size">
                        <input type="hidden" name="color" value="<%= product.color %>" id="" class="product-color">
                        
                        <input type="hidden" name="categories" value="<%= product.categories %>" id="">
                        <button type="button" id="button" class="addBtn">Add to cart</button>
                        
                        
            </div>
            <% }) %>       
</div>
</div>



<!-- mycart items -->
<div class="cart_conntaianer">
    <div class="cart" style="overflow-x: auto;">
  
    <h2 id="table-header">My Shopping cart</h2>
    <form action="/users/cart" method="POST">
      <table class="cart-table"> 
      
      
  
        <thead>
            <tr>
              <td>s/n</td>
              <td>img</td>
              <td id="name">name</td>
              <td>Amt</td>
              <td>color</td>
              <td>size</td>
              <td>Qty</td>
              <td>Total price</td>
  
              <td>remove</td>
           </tr>
          </thead>       
                  
          <tbody>
  
          </tbody>
    
          <tfoot>
            <tr>
                <td colspan="10">Grand Total <span class="total"></span></td>
            </tr>
  
          </tfoot>
  
          
          
          
        </table>
        <!-- <input type="hidden" name="userId" value="<ser.id %> " id=""> -->
        <button> <a href="/">Continue shopping</a></button>
        <% if(!user){ %> 
        <p id="notLogging">Checkout</p>
        <% }else{ %> 
          <button type="submit" id="checkout">Checkout</button>
  
          <% } %> 
      </form>
      
  
  
  <div class="loginUser">
    <div class="userLogin">
    <P>Please login to checkout</P>
    <div class="button">
  
      <button id="removeSlideShow" type="submit">cancel</button>
      <a href="/users/login">Login</a>
    </div>
  </div>
  
  </div>
    
  
  </div>
</div>




<script>
    const catBtn = document.querySelectorAll(".cart")
    const cartItem = document.querySelectorAll(".mycategory")
    const category = document.querySelector(".categories")
    
    console.log(category);
    catBtn.forEach(categBtn =>{
        categBtn.addEventListener("click", (e)=>{
            category.querySelector(".active").classList.remove("active")
            categBtn.classList.add("active")
            

           let cateAttribute = categBtn.getAttribute("data-name")
           
           cartItem.forEach(items =>{
               let myItemAttrribute = items.getAttribute("data-name")
               if(cateAttribute == myItemAttrribute || cateAttribute === "all"){
               
                items.classList.remove("hide")
                items.classList.add("show")
               }else{
                items.classList.remove("show")
                items.classList.add("hide")


               }
           })
        })
    })





</script>
<!-- // my shopping cart script -->


<script>
    function increase(){
     const addUp = document.querySelectorAll(".add")
     const subUp = document.querySelectorAll(".sub")
     const qty = document.querySelector("#qty")
     
     addUp.forEach(add =>{
         add.addEventListener("click", (e)=>{
             
             let input = e.target.parentElement.children[1];
              let inputValue = input.value
              let newValue = parseInt(inputValue) + 1
              input.value = newValue
             
 
            })
            
             
             
         })
 
         subUp.forEach(sub =>{
             sub.addEventListener("click", (e)=>{
            
          let input = e.target.parentElement.children[1];
          let inputValue = input.value
          let newValue = parseInt(inputValue) - 1
          input.value = newValue
                 
          if(newValue < 1){
          input.value = 1
 
          }
            })
            
             
             
         })
    }
     
 
 </script>
 
 <script>
   let notLogging = document.getElementById("notLogging")
   let removeSlideShow = document.getElementById("removeSlideShow")
   let loginUser = document.querySelector(".loginUser")
   console.log(removeSlideShow);
   notLogging.addEventListener("click", (e) =>{
     loginUser.classList.add("showLogin")
 
 
   })
   removeSlideShow.addEventListener("click", (e) =>{
     loginUser.classList.remove("showLogin")
 
 
 
   })
 </script>




<!-- show cart items -->
<script>
    let cartNumber = document.querySelector(".cartNumber")
    let cart_conntaianer = document.querySelector(".cart_conntaianer")
    cartNumber.addEventListener("click", (e) =>{
        cart_conntaianer.classList.add("showLogin")
            
        })
    
    
     </script>